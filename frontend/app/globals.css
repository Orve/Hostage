@import "tailwindcss";

:root {
  --background: #000000;
  --foreground: #00ff41;
  /* CRT Green */
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-mono: 'Courier New', Courier, monospace;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-mono);
  overflow-x: hidden;
  min-height: 100dvh; /* dvh for mobile browser address bar compatibility */
  width: 100vw;
  margin: 0;
  padding: 0;
}

/* --- CRT & Horror Effects --- */

/*
 * NOTE: These legacy classes are kept for backward compatibility.
 * New implementation uses <ScreenEffect /> component in layout.tsx
 * for better mobile coverage (iOS status bar, etc).
 */

/* 1. CRT Scanlines */
.scanlines::before {
  content: " ";
  display: block;
  position: fixed;
  inset: 0; /* Shorthand for top/right/bottom/left: 0 */
  width: 100vw;
  height: 100dvh; /* dvh handles mobile address bar */
  background: linear-gradient(to bottom,
      rgba(18, 16, 16, 0) 50%,
      rgba(0, 0, 0, 0.25) 50%);
  background-size: 100% 4px;
  z-index: 50;
  pointer-events: none;
}

/* 2. Vignette (Dark Corners) */
.vignette::after {
  content: " ";
  display: block;
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100dvh;
  background: radial-gradient(circle,
      rgba(0, 0, 0, 0) 60%,
      rgba(0, 0, 0, 0.8) 100%);
  z-index: 50;
  pointer-events: none;
}

/* 3. Text Glitch Animation */
@keyframes glitch-skew {
  0% {
    transform: skew(0deg);
  }

  20% {
    transform: skew(-2deg);
  }

  40% {
    transform: skew(2deg);
  }

  60% {
    transform: skew(-1deg);
  }

  80% {
    transform: skew(1deg);
  }

  100% {
    transform: skew(0deg);
  }
}

@keyframes glitch-anim-1 {
  0% {
    clip-path: inset(20% 0 80% 0);
    transform: translate(-2px, 1px);
  }

  20% {
    clip-path: inset(60% 0 10% 0);
    transform: translate(2px, -1px);
  }

  40% {
    clip-path: inset(40% 0 50% 0);
    transform: translate(-2px, 2px);
  }

  60% {
    clip-path: inset(80% 0 5% 0);
    transform: translate(2px, -2px);
  }

  80% {
    clip-path: inset(10% 0 70% 0);
    transform: translate(-1px, 1px);
  }

  100% {
    clip-path: inset(30% 0 50% 0);
    transform: translate(1px, -1px);
  }
}

.glitch-text {
  position: relative;
  display: inline-block;
}

.glitch-text::before,
.glitch-text::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
}

.glitch-text::before {
  left: 2px;
  text-shadow: -1px 0 #ff00c1;
  clip-path: inset(44% 0 61% 0);
  animation: glitch-anim-1 2s infinite linear alternate-reverse;
}

.glitch-text::after {
  left: -2px;
  text-shadow: -1px 0 #00fff9;
  clip-path: inset(44% 0 61% 0);
  animation: glitch-anim-1 2s infinite linear alternate-reverse;
}

/* 4. Critical State (Red Flashing) */
@keyframes critical-pulse {
  0% {
    box-shadow: inset 0 0 10px #300000;
  }

  50% {
    box-shadow: inset 0 0 50px #ff0000;
  }

  100% {
    box-shadow: inset 0 0 10px #300000;
  }
}

.critical-state {
  animation: critical-pulse 1s infinite;
  border: 1px solid red;
}

.animate-critical-pulse {
  animation: critical-pulse 0.5s infinite;
}

.dead-state {
  filter: grayscale(100%) contrast(1.5);
  background-color: #1a1a1a;
}

/* 5. Image Glitch Animations */
@keyframes glitch-occasional {
  0% {
    transform: translate(0);
    opacity: 1;
  }

  2% {
    transform: translate(-3px, 1px);
    opacity: 0.8;
  }

  4% {
    transform: translate(3px, -1px);
    opacity: 0.9;
  }

  5% {
    transform: translate(0);
    opacity: 1;
  }

  98% {
    transform: translate(0);
    opacity: 1;
  }

  99% {
    transform: translate(2px, 0);
    opacity: 0.5;
  }

  100% {
    transform: translate(0);
    opacity: 1;
  }
}

.glitch-occasional {
  animation: glitch-occasional 4s infinite;
}

@keyframes glitch-heavy {
  0% {
    transform: translate(0) scale(1);
    filter: hue-rotate(0deg);
    clip-path: inset(0 0 0 0);
  }

  20% {
    transform: translate(-5px, 2px) scale(1.02);
    filter: hue-rotate(90deg);
    clip-path: inset(10% 0 80% 0);
  }

  40% {
    transform: translate(5px, -2px) scale(0.98);
    filter: hue-rotate(-90deg);
    clip-path: inset(80% 0 5% 0);
  }

  60% {
    transform: translate(-5px, -2px) scale(1.05);
    filter: hue-rotate(180deg);
    clip-path: inset(20% 0 50% 0);
  }

  80% {
    transform: translate(5px, 2px) scale(0.95);
    filter: hue-rotate(45deg);
    clip-path: inset(50% 0 20% 0);
  }

  100% {
    transform: translate(0) scale(1);
    filter: hue-rotate(0deg);
    clip-path: inset(0 0 0 0);
  }
}

.glitch-heavy {
  animation: glitch-heavy 0.2s infinite linear;
}

/* --- StasisChamber Animations --- */

/* 6. Float Animation - キャラクターの浮遊 */
@keyframes float {
  0% {
    transform: translateY(0) rotate(0deg);
  }

  25% {
    transform: translateY(-15px) rotate(0.5deg);
  }

  50% {
    transform: translateY(-8px) rotate(-0.3deg);
  }

  75% {
    transform: translateY(-18px) rotate(0.4deg);
  }

  100% {
    transform: translateY(0) rotate(0deg);
  }
}

.animate-float {
  animation: float 8s ease-in-out infinite;
}

/* Void Geometry Float (Faster) */
.animate-float-void {
  animation: float 3s ease-in-out infinite;
}

/* 7. Bubble Rise - 気泡の上昇 */
@keyframes bubble-rise {
  0% {
    transform: translateY(0) scale(0.3);
    opacity: 0;
  }

  10% {
    opacity: 0.6;
  }

  50% {
    transform: translateY(-50vh) scale(1);
    opacity: 0.8;
  }

  80% {
    opacity: 0.4;
  }

  100% {
    transform: translateY(-100vh) scale(1.2);
    opacity: 0;
  }
}

.animate-bubble-rise {
  animation: bubble-rise 10s linear infinite;
}

/* 8. Fluid Pulse - 流体の明滅 */
@keyframes fluid-pulse {
  0% {
    box-shadow: inset 0 0 40px rgba(16, 185, 129, 0.3);
  }

  50% {
    box-shadow: inset 0 0 80px rgba(16, 185, 129, 0.5);
  }

  100% {
    box-shadow: inset 0 0 40px rgba(16, 185, 129, 0.3);
  }
}

.animate-fluid-pulse {
  animation: fluid-pulse 3s ease-in-out infinite;
}

/* 9. Glitch Flicker - 瀕死時の画面ちらつき */
@keyframes glitch-flicker {
  0% {
    opacity: 1;
  }

  2% {
    opacity: 0.8;
  }

  4% {
    opacity: 1;
  }

  8% {
    opacity: 0.6;
  }

  10% {
    opacity: 1;
  }

  40% {
    opacity: 1;
  }

  42% {
    opacity: 0.7;
  }

  44% {
    opacity: 1;
  }

  100% {
    opacity: 1;
  }
}

.animate-glitch-flicker {
  animation: glitch-flicker 2s infinite;
}

.bg-radial-gradient-vignette {
  background: radial-gradient(circle at center,
      rgba(0, 0, 0, 0) 0%,
      rgba(0, 0, 0, 0) 40%,
      rgba(0, 0, 0, 0.3) 70%,
      rgba(0, 0, 0, 0.6) 100%);
}

/* ========== Visual Decay System ========== */

/* 11. Decay Scanlines - 走査線オーバーレイ（Stage 2: Caution用） */
.decay-scanlines {
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(0, 0, 0, 0.15) 2px,
    rgba(0, 0, 0, 0.15) 4px
  );
  animation: scanline-move 10s linear infinite;
}

@keyframes scanline-move {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 0 100px;
  }
}

/* 12. Decay Noise - ノイズオーバーレイ（Stage 3: Danger用） */
/* SVGベースのノイズパターン（外部アセット不要） */
.decay-noise {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  opacity: 0.3;
  mix-blend-mode: overlay;
}

/* 13. Decay Noise Heavy - 激しいノイズ（Stage 4: Critical用） */
.decay-noise-heavy {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.5' numOctaves='6' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
  /* 赤みを帯びたノイズ */
  background-color: rgba(127, 29, 29, 0.2);
  background-blend-mode: multiply;
}

/* 14. Decay Vignette Heavy - 強化ビネット（Stage 3: Danger用） */
.decay-vignette-heavy {
  background: radial-gradient(
    ellipse at center,
    rgba(0, 0, 0, 0) 20%,
    rgba(0, 0, 0, 0.3) 50%,
    rgba(0, 0, 0, 0.7) 80%,
    rgba(0, 0, 0, 0.9) 100%
  );
}

/* 15. Decay Vignette Extreme - 極端なビネット（Stage 4: Critical用） */
.decay-vignette-extreme {
  background: radial-gradient(
    ellipse at center,
    rgba(0, 0, 0, 0) 10%,
    rgba(50, 0, 0, 0.4) 40%,
    rgba(80, 0, 0, 0.7) 70%,
    rgba(30, 0, 0, 0.95) 100%
  );
}

/* 16. Decay Flicker Animation - 高速の不規則な明滅（Stage 4: Critical用） */
@keyframes decay-flicker {
  0% {
    opacity: 1;
    filter: brightness(1);
  }
  5% {
    opacity: 0.7;
    filter: brightness(0.8);
  }
  10% {
    opacity: 1;
    filter: brightness(1.1);
  }
  15% {
    opacity: 0.5;
    filter: brightness(0.6);
  }
  20% {
    opacity: 1;
    filter: brightness(1);
  }
  25% {
    opacity: 0.9;
    filter: brightness(0.9);
  }
  30% {
    opacity: 1;
    filter: brightness(1.2);
  }
  35% {
    opacity: 0.6;
    filter: brightness(0.7);
  }
  40% {
    opacity: 1;
    filter: brightness(1);
  }
  55% {
    opacity: 1;
    filter: brightness(1);
  }
  60% {
    opacity: 0.4;
    filter: brightness(0.5);
  }
  65% {
    opacity: 1;
    filter: brightness(1.3);
  }
  70% {
    opacity: 0.8;
    filter: brightness(0.85);
  }
  100% {
    opacity: 1;
    filter: brightness(1);
  }
}

.animate-decay-flicker {
  animation: decay-flicker 0.5s infinite;
}

/* 17. Decay Pulse Animation - 赤黒いパルス（Stage 4: Critical用） */
@keyframes decay-pulse {
  0% {
    opacity: 0.3;
  }
  25% {
    opacity: 0.5;
  }
  50% {
    opacity: 0.2;
  }
  75% {
    opacity: 0.6;
  }
  100% {
    opacity: 0.3;
  }
}

.animate-decay-pulse {
  animation: decay-pulse 1.5s ease-in-out infinite;
}

/* 18. Blood Drip Effect - 血が滴るようなグラデーション（オプション） */
.decay-blood-drip {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 70%,
    rgba(139, 0, 0, 0.3) 85%,
    rgba(80, 0, 0, 0.5) 95%,
    rgba(50, 0, 0, 0.7) 100%
  );
}

/* 19. Static Noise Animation - アナログTVの砂嵐風 */
@keyframes static-noise {
  0% {
    background-position: 0 0;
  }
  10% {
    background-position: -5% -10%;
  }
  20% {
    background-position: -15% 5%;
  }
  30% {
    background-position: 7% -25%;
  }
  40% {
    background-position: -5% 25%;
  }
  50% {
    background-position: -15% 10%;
  }
  60% {
    background-position: 15% 0%;
  }
  70% {
    background-position: 0% 15%;
  }
  80% {
    background-position: 3% 35%;
  }
  90% {
    background-position: -10% 10%;
  }
  100% {
    background-position: 0 0;
  }
}

.animate-static-noise {
  animation: static-noise 0.1s steps(5) infinite;
}

/* 20. Chromatic Aberration - 色収差効果（高度な不快感演出） */
@keyframes chromatic-shift {
  0% {
    text-shadow: -2px 0 rgba(255, 0, 0, 0.5), 2px 0 rgba(0, 255, 255, 0.5);
  }
  25% {
    text-shadow: 2px 0 rgba(255, 0, 0, 0.5), -2px 0 rgba(0, 255, 255, 0.5);
  }
  50% {
    text-shadow: -1px 1px rgba(255, 0, 0, 0.5), 1px -1px rgba(0, 255, 255, 0.5);
  }
  75% {
    text-shadow: 1px -1px rgba(255, 0, 0, 0.5), -1px 1px rgba(0, 255, 255, 0.5);
  }
  100% {
    text-shadow: -2px 0 rgba(255, 0, 0, 0.5), 2px 0 rgba(0, 255, 255, 0.5);
  }
}

.animate-chromatic-shift {
  animation: chromatic-shift 0.3s infinite;
}

/* ========== Mobile UX Fixes ========== */

/* Prevent auto-zoom on iOS Safari when focusing inputs */
@media screen and (max-width: 768px) {
  input, textarea, select {
    font-size: 16px !important;
  }
}